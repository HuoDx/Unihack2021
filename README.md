活点地图
===

HuoDx @ Unihack 2021

赛道: Optimization/Contain - 优化

描述: 让需要的人看到附近的物资、救助站等**实时信息**, 并且可以方便地导航; 此外, 允许任何个体实时地发布救助站点信息, 提高信息交换效率.

## Inspiration

看到赛道先划掉第一个 (因为完全不知道怎么做), 想怎么*优化* 和 *重连*.
想了一些随机想法, 包括在线篝火晚会(重连), 通过闪光灯来发送位置信息方便救援(优化), 通过蓝牙组建去中心化网络连起来方便在灾难发生时联系(优化).

但都因为太虚或者技术上不靠谱放弃了.

突然想到之前河南暴雨的时候我看到很多朋友圈求扩散, 大概就是说民间自发的救助站点——“某个位置提供庇护所和简餐” 之类的. 我甚至在内容和暴雨完全无关的视频上看到了这样求扩散的评论.

于是我意识到这是一个目前存在的问题: 自发组织的资源如何和需要帮助的人对接? 经过一番思考后, 我意识到通过地理位置就近匹配是最好的. 设想一下, 下着暴雨, 到处都是积水, 你躲在屋檐下勉强避雨: 这时候最高效率的方式就是打开手机看看附近哪里可以得到帮助——在需要现实基础的事上, (真实的)地理位置永远不会骗人.

因此我进一步想到, 如果现在我允许人们实时添加自发组织的民间物资点或者其他救援帮助, 再通过GPS定位让周围的人都能看到, 那这便可以大幅提升民间好心人积极的影响力, 大幅增加民间资源的分配效率.
 
## What it does

- 希望提供帮助的人在上面创建物资点

- 所有人都可以看到并且预约

- 选择前往可以跟随平台的路径规划和导航图. 通过大致路线和文字描述的展示最大幅度省电 (常规导航过于费电的特性并不适合灾难场景下的短距离导航)

- 可以预约场地, 留下联系方式.

- 可以选择自己的需求然后自动匹配离自己最近的物资点.

## How we built it

- 通过百度地图 API 实现地图定位、展示、导航等前端功能.

- 部分页面使用了模版渲染, 通过 Jinjia2 完成.

- 基于 Python Flask 框架的 Web 服务器实现后端数据对接.

- 使用 Postgre SQL 数据库实现数据存储.

## Challenges we ran into

前端:

    - 对接百度地图API发现部分功能没有做到文档说的实现: 从 WebGL 版 API 换成老的 JS API 解决.

    - 百度地图对简要信息页面支持不足: 自己写一个模版 HTML, 然后替换关键字实现生成 HTML 代码, 最后再加到百度提供的字符串输入中 (作为innerHTML现实); 达到我想要的效果.

    - 百度地图异步API全都是回调, 用起来不方便: 我手动通过封装一层 Promise 实现了优雅的异步写法 (部署时用 Babel 编译一下就可以解决兼容性问题了)

    - 异步数据的显示: 通过等数据到位之后直接替换HTML的方式实现.

后端:

    - 开始过于沉重的架构并不适合 Hackathon 活动: 后期扔掉条条框框放飞自我, 先做完再说.

    - 物资点相关的数据因为值太多SQL很难看并且很不优雅(大量重复的代码): 后期再做优化, 先保证功能.

## Accomplishments that we're proud of

- 真正做到了可以灵活创建物资点的功能.

- 可以很优雅地显示各种信息提供十分省电的导航.

- 甚至可以不用自己挑物资点, 直接自动匹配, 省时省力.

- Material Design 风格用户界面, 十分好看丝滑.

## What we learned

- 如何使用百度地图 API 做很多事.

- Hackathon 紧迫的时间下如何做完东西.

- 加深了对 JavaScript 异步机制的理解.

- 加深了对 Postgre SQL 数据库的理解.

## What's next for 活点地图

我发现这东西完全不止局限在自然灾害的场景下: 比如你在学校中午刚吃完饭, 无事可做. 你可以打开它, 然后看到周围实时进行的活动, 比如一场免费的社团音乐表演或是几个在球场想打球但是缺人的公告. 你可以选择你想要的, 然后直接前往, 十分方便高效. 并且这样的公告牌实时性很强而且基于地理位置, 可以有效减少在你忙时候打扰你.

也就是说, 我看到的它的未来是一款万能的社交软件——各种正在现实发生的事都可以在上面上传, 然后欢迎别人来: 一切基于现实, 而不是摸不着边界、被大数据推荐算法支配的网络空间.


